<!DOCTYPE html>
@{
    var avatarPath = Context.Session.GetString("HinhAnh") ?? "/admin/assets/img/avatars/1.png";
    var hoten = Context.Session.GetString("HoTen");
}

<!-- =========================================================
* Sneat - Bootstrap 5 HTML Admin Template - Pro | v1.0.0
==============================================================
* Product Page: https://themeselection.com/products/sneat-bootstrap-html-admin-template/
* Created by: ThemeSelection
* License: You must have a valid license purchased in order to legally use the theme for your project.
* Copyright ThemeSelection (https://themeselection.com)
=========================================================
 -->
<html lang="vi"
      class="light-style layout-menu-fixed"
      dir="ltr"
      data-theme="theme-default"
      data-assets-path="/admin/assets/"
      data-template="vertical-menu-template-free">
<head>
    <meta charset="utf-8" />
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0" />

    <title>Quản Lý Áo Dài Việt Nam | Hệ Thống Bán Hàng</title>

    <meta name="description" content="Hệ thống quản lý bán áo dài truyền thống Việt Nam" />

    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/admin/assets/img/favicon/favicon.ico" />

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

    <!-- Icons -->
    <link rel="stylesheet" href="/admin/assets/vendor/fonts/boxicons.css" />

    <!-- Core CSS -->
    <link rel="stylesheet" href="/admin/assets/vendor/css/core.css" class="template-customizer-core-css" />
    <link rel="stylesheet" href="/admin/assets/vendor/css/theme-default.css" class="template-customizer-theme-css" />
    <link rel="stylesheet" href="/admin/assets/css/demo.css" />

    <!-- Vendors CSS -->
    <link rel="stylesheet" href="/admin/assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.css" />
    <link rel="stylesheet" href="/admin/assets/vendor/libs/apex-charts/apex-charts.css" />

    <!-- Helpers -->
    <script src="/admin/assets/vendor/js/helpers.js"></script>
    <script src="/admin/assets/js/config.js"></script>

    <style>
        /* ===== FORM STYLING ===== */
        .form-wrapper {
            background-color: #ffffff;
            border-radius: 0.75rem;
            padding: 2rem 2.5rem;
            box-shadow: 0 0.375rem 1.5rem rgba(161, 172, 184, 0.15);
            font-family: "Public Sans", sans-serif;
            margin-bottom: 2rem;
        }

        h2 {
            color: #696cff;
            font-weight: 600;
            border-bottom: 2px solid #d4af37;
            padding-bottom: 0.5rem;
            margin-bottom: 1.5rem;
        }

        .btn-success {
            background-color: #d4af37 !important;
            border-color: #d4af37 !important;
            font-weight: 500;
            color: white !important;
        }

            .btn-success:hover {
                background-color: #b8941f !important;
                border-color: #b8941f !important;
            }

        .btn-secondary {
            background-color: #8B0000 !important;
            border-color: #8B0000 !important;
            color: white !important;
            font-weight: 500;
        }

            .btn-secondary:hover {
                background-color: #a52a2a !important;
                border-color: #a52a2a !important;
            }

        .form-check-label,
        .form-label {
            font-weight: 500;
            color: #566a7f;
        }

        .text-danger {
            font-size: 0.875rem;
        }

        input.form-control,
        select.form-select,
        textarea.form-control {
            box-shadow: none !important;
            border: 1px solid #d9dee3;
            transition: border-color 0.2s ease-in-out;
        }

            input.form-control:focus,
            select.form-select:focus,
            textarea.form-control:focus {
                border-color: #696cff;
                box-shadow: 0 0 0 0.2rem rgba(105, 108, 255, 0.25) !important;
            }

        /* ===== VIETNAMESE AO DAI THEME ===== */
        .ao-dai-theme {
            --ao-dai-red: #dc2626;
            --ao-dai-gold: #f59e0b;
            --ao-dai-cream: #fef3c7;
            --ao-dai-brown: #92400e;
            --ao-dai-dark: #1f2937;
        }

        /* ===== BASE STYLING ===== */
        body {
            font-family: 'Inter', sans-serif !important;
            background: linear-gradient(135deg, #fef3c7 0%, #fed7aa 100%) !important;
            min-height: 100vh;
        }

        /* ===== BRAND STYLING ===== */
        .app-brand-text {
            font-family: 'Playfair Display', serif !important;
            font-weight: 700 !important;
            background: linear-gradient(135deg, #dc2626 0%, #f59e0b 100%) !important;
            -webkit-background-clip: text !important;
            -webkit-text-fill-color: transparent !important;
            background-clip: text !important;
        }

        /* ===== MENU STYLING ===== */
        .layout-menu {
            background: linear-gradient(180deg, #fff 0%, #fef3c7 100%) !important;
            border-right: 3px solid #f59e0b !important;
            box-shadow: 4px 0 20px rgba(220, 38, 38, 0.1) !important;
        }

        .menu-item.active > .menu-link {
            background: linear-gradient(135deg, #dc2626 0%, #f59e0b 100%) !important;
            color: white !important;
            border-radius: 12px !important;
            margin: 0 8px !important;
            box-shadow: 0 4px 15px rgba(220, 38, 38, 0.3) !important;
        }

        .menu-link {
            padding: 12px 16px !important;
            border-radius: 8px !important;
            margin: 2px 8px !important;
            transition: all 0.3s ease !important;
            color: #1f2937 !important;
        }

            .menu-link:hover {
                background: linear-gradient(135deg, #fef3c7 0%, #fed7aa 100%) !important;
                transform: translateX(4px) !important;
                box-shadow: 0 2px 10px rgba(220, 38, 38, 0.15) !important;
            }

        .menu-header-text {
            color: #92400e !important;
            font-weight: 600 !important;
            font-size: 0.75rem !important;
            letter-spacing: 1px !important;
        }

        /* ===== NAVBAR STYLING ===== */
        .layout-navbar {
            background: white !important;
            border-bottom: 3px solid #f59e0b !important;
            box-shadow: 0 2px 20px rgba(220, 38, 38, 0.1) !important;
        }

        .navbar-brand-logo {
            width: 40px !important;
            height: 40px !important;
            background: linear-gradient(135deg, #dc2626 0%, #f59e0b 100%) !important;
            border-radius: 50% !important;
            display: flex !important;
            align-items: center !important;
            justify-content: center !important;
            color: white !important;
            font-size: 1.2rem !important;
        }

        /* ===== CONTENT STYLING ===== */
        .content-wrapper {
            background: rgba(255, 255, 255, 0.9) !important;
            backdrop-filter: blur(10px) !important;
            border-radius: 20px 20px 0 0 !important;
            margin: 20px !important;
            box-shadow: 0 8px 32px rgba(220, 38, 38, 0.1) !important;
        }

        /* ===== DROPDOWN STYLING ===== */
        .dropdown-menu {
            border: none !important;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1) !important;
            border-radius: 12px !important;
        }

        .dropdown-item:hover {
            background: linear-gradient(135deg, #fef3c7 0%, #fed7aa 100%) !important;
            color: #1f2937 !important;
        }

        /* ===== FOOTER STYLING ===== */
        .footer {
            background: linear-gradient(135deg, #dc2626 0%, #f59e0b 100%) !important;
            color: white !important;
            border-radius: 0 !important;
        }

            .footer a {
                color: #fef3c7 !important;
            }

        /* ===== SEARCH BOX STYLING ===== */
        .search-box {
            background: linear-gradient(135deg, #fef3c7 0%, #fed7aa 100%) !important;
            border: 2px solid #f59e0b !important;
            border-radius: 25px !important;
            padding: 8px 20px !important;
        }

            .search-box input {
                background: transparent !important;
                border: none !important;
                outline: none !important;
                color: #1f2937 !important;
            }

                .search-box input::placeholder {
                    color: #92400e !important;
                }

        /* ===== AVATAR STYLING ===== */
        .avatar {
            border: 3px solid #f59e0b !important;
            box-shadow: 0 4px 12px rgba(220, 38, 38, 0.2) !important;
        }

        /* ===== BACKGROUND PATTERN ===== */
        .lotus-pattern {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23f59e0b' fill-opacity='0.05'%3E%3Cpath d='M30 30c0-11.046-8.954-20-20-20s-20 8.954-20 20 8.954 20 20 20 20-8.954 20-20zm0 0c0-11.046 8.954-20 20-20s20 8.954 20 20-8.954 20-20 20-20-8.954-20-20z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
            pointer-events: none;
            z-index: -1;
        }

        /* ===== ANIMATIONS ===== */
        .fade-in-up {
            opacity: 0;
            transform: translateY(20px);
            animation: fadeInUpAnimation 0.6s ease-out forwards;
        }

        @@keyframes fadeInUpAnimation {
            from

        {
            opacity: 0;
            transform: translateY(20px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }

        }

        /* ===== CUSTOM CARD STYLING ===== */
        .vietnamese-card {
            border: none !important;
            border-radius: 15px !important;
            box-shadow: 0 8px 25px rgba(220, 38, 38, 0.1) !important;
            overflow: hidden !important;
        }

        .vietnamese-gradient-text {
            background: linear-gradient(135deg, #dc2626 0%, #f59e0b 100%) !important;
            -webkit-background-clip: text !important;
            -webkit-text-fill-color: transparent !important;
            background-clip: text !important;
        }

        /* ===== NOTIFICATION BADGE ===== */
        .notification-badge {
            background: #dc2626 !important;
            font-size: 0.6rem !important;
        }

        /* ===== HOVER EFFECTS ===== */
        .hover-lift {
            transition: transform 0.3s ease, box-shadow 0.3s ease !important;
        }

            .hover-lift:hover {
                transform: translateY(-5px) !important;
                box-shadow: 0 12px 35px rgba(220, 38, 38, 0.15) !important;
            }
    </style>
</head>

<body class="ao-dai-theme">
    <div class="lotus-pattern"></div>
    <div class="layout-wrapper layout-content-navbar">
        <div class="layout-container">
            <!-- ===== SIDEBAR MENU ===== -->
            <aside id="layout-menu" class="layout-menu menu-vertical menu bg-menu-theme">
                <div class="app-brand demo text-center p-3">
                    <a href="/Admin/Home/Index" class="app-brand-link d-flex align-items-center">
                        <img src="~/images/logoAoDai.png" alt="Logo Áo Dài VN" style="height: 40px;" />
                    </a>
                    <a href="javascript:void(0);" class="layout-menu-toggle menu-link text-large ms-auto d-block d-xl-none">
                        <i class="bx bx-chevron-left bx-sm align-middle"></i>
                    </a>
                </div>

                <div class="menu-inner-shadow"></div>

                <ul class="menu-inner py-1">
                    <!-- Dashboard -->
                    <li class="menu-header small text-uppercase">
                        <span class="menu-header-text">Quản Lý Bán Hàng</span>
                    </li>
                    <li class="menu-item @(ViewContext.RouteData.Values["controller"]?.ToString() == "Home" && ViewContext.RouteData.Values["action"]?.ToString() == "Index" ? "active" : "")">
                        <a href="/Admin/ThongKe/Dashboard" class="menu-link">
                            <i class="menu-icon fas fa-chart-line"></i>
                            <div data-i18n="Analytics">Bán Hàng Tại Quầy</div>
                        </a>
                    </li>

                    <!-- Quản lý sản phẩm -->
                    <li class="menu-header small text-uppercase">
                        <span class="menu-header-text">Quản Lý Sản Phẩm</span>
                    </li>
                    <li class="menu-item @(ViewContext.RouteData.Values["controller"]?.ToString() == "SanPham" ? "active" : "")">
                        <a href="/Admin/SanPham/Index" class="menu-link">
                            <i class="menu-icon fas fa-tshirt"></i>
                            <div data-i18n="AoDai">Áo Dài</div>
                        </a>
                    </li>
                    <li class="menu-item @(ViewContext.RouteData.Values["controller"]?.ToString() == "MauSac" ? "active" : "")">
                        <a href="/Admin/MauSac/Index" class="menu-link">
                            <i class="menu-icon fas fa-palette"></i>
                            <div data-i18n="MauSac">Màu Sắc</div>
                        </a>
                    </li>
                    <li class="menu-item @(ViewContext.RouteData.Values["controller"]?.ToString() == "Size" ? "active" : "")">
                        <a href="/Admin/Size/Index" class="menu-link">
                            <i class="menu-icon fas fa-ruler"></i>
                            <div data-i18n="Size">Kích Thước</div>
                        </a>
                    </li>
                    <li class="menu-item @(ViewContext.RouteData.Values["controller"]?.ToString() == "ChatLieu" ? "active" : "")">
                        <a href="/Admin/ChatLieu/Index" class="menu-link">
                            <i class="menu-icon fas fa-leaf"></i>
                            <div data-i18n="ChatLieu">Chất Liệu</div>
                        </a>
                    </li>
                    <li class="menu-item @(ViewContext.RouteData.Values["controller"]?.ToString() == "DanhMuc" ? "active" : "")">
                        <a href="/Admin/DanhMuc/Index" class="menu-link">
                            <i class="menu-icon fas fa-tags"></i>
                            <div data-i18n="DanhMuc">Danh Mục</div>
                        </a>
                    </li>

                    <!-- Quản lý đơn hàng -->
                    <li class="menu-header small text-uppercase">
                        <span class="menu-header-text">Quản Lý Đơn Hàng</span>
                    </li>
                    <li class="menu-item @(ViewContext.RouteData.Values["controller"]?.ToString() == "DonHang" ? "active" : "")">
                        <a href="/Admin/DonHang/Index" class="menu-link">
                            <i class="menu-icon fas fa-shopping-cart"></i>
                            <div data-i18n="DonHang">Đơn Hàng</div>
                        </a>
                    </li>
                    <li class="menu-item @(ViewContext.RouteData.Values["controller"]?.ToString() == "KhachHang" ? "active" : "")">
                        <a href="/Admin/KhachHang/Index" class="menu-link">
                            <i class="menu-icon fas fa-users"></i>
                            <div data-i18n="KhachHang">Khách Hàng</div>
                        </a>
                    </li>

                    <!-- Báo cáo & Thống kê -->
                    <li class="menu-header small text-uppercase">
                        <span class="menu-header-text">Báo Cáo & Thống Kê</span>
                    </li>
                    <li class="menu-item @(ViewContext.RouteData.Values["controller"]?.ToString() == "ThongKe" && ViewContext.RouteData.Values["action"]?.ToString() == "Customers" ? "active" : "")">
                        <a href="/Admin/ThongKe/Customers" class="menu-link">
                            <i class="menu-icon fas fa-users"></i>
                            <div data-i18n="Customers">Khách hàng</div>
                        </a>
                    </li>
                    <li class="menu-item @(ViewContext.RouteData.Values["controller"]?.ToString() == "ThongKe" && ViewContext.RouteData.Values["action"]?.ToString() == "Revenue" ? "active" : "")">
                        <a href="/Admin/ThongKe/Revenue" class="menu-link">
                            <i class="menu-icon fas fa-coins"></i>
                            <div data-i18n="Revenue">Doanh Thu</div>
                        </a>
                    </li>
                    <li class="menu-item @(ViewContext.RouteData.Values["controller"]?.ToString() == "ThongKe" && ViewContext.RouteData.Values["action"]?.ToString() == "Products" ? "active" : "")">
                        <a href="/Admin/ThongKe/Products" class="menu-link">
                            <i class="menu-icon fas fa-warehouse"></i>
                            <div data-i18n="Products">Tồn Kho</div>
                        </a>
                    </li>
                    <li class="menu-item @(ViewContext.RouteData.Values["controller"]?.ToString() == "ThongKe" && ViewContext.RouteData.Values["action"]?.ToString() == "Promotions" ? "active" : "")">
                        <a href="/Admin/ThongKe/Promotions" class="menu-link">
                            <i class="menu-icon fas fa-tags"></i>
                            <div data-i18n="Promotions">Giảm giá</div>
                        </a>
                    </li>

                    <!-- Cài đ                    <!-- Cài đặt -->
                    <li class="menu-header small text-uppercase">
                        <span class="menu-header-text">Hệ Thống</span>
                    </li>
                    <li class="menu-item @(ViewContext.RouteData.Values["controller"]?.ToString() == "CaiDat" ? "active" : "")">
                        <a href="/Admin/CaiDat/Index" class="menu-link">
                            <i class="menu-icon fas fa-cog"></i>
                            <div data-i18n="CaiDat">Cài Đặt</div>
                        </a>
                    </li>
                    <li class="menu-item @(ViewContext.RouteData.Values["controller"]?.ToString() == "EmployeeManagement" ? "active" : "")">
                        <a href="/Admin/EmployeeManagement" class="menu-link">
                            <i class="menu-icon fas fa-user-tie"></i>
                            <div data-i18n="EmployeeManagement">Quản Lý Nhân Viên</div>
                        </a>
                    </li>
                </ul>
            </aside>
            <!-- / Menu -->
            <!-- Layout container -->
            <div class="layout-page">
                <!-- ===== NAVBAR ===== -->
                <nav class="layout-navbar container-xxl navbar navbar-expand-xl navbar-detached align-items-center bg-navbar-theme" id="layout-navbar">
                    <div class="layout-menu-toggle navbar-nav align-items-xl-center me-3 me-xl-0 d-xl-none">
                        <a class="nav-item nav-link px-0 me-xl-4" href="javascript:void(0)">
                            <i class="bx bx-menu bx-sm"></i>
                        </a>
                    </div>

                    <div class="navbar-nav-right d-flex align-items-center" id="navbar-collapse">
                        <!-- Search -->
                        <div class="navbar-nav align-items-center">
                            <div class="nav-item d-flex align-items-center search-box">
                                <i class="fas fa-search fs-5 lh-0 me-2"></i>
                                <input type="text"
                                       class="form-control border-0 shadow-none"
                                       placeholder="Tìm kiếm áo dài, khách hàng..."
                                       aria-label="Search..." />
                            </div>
                        </div>
                        <!-- /Search -->

                        <ul class="navbar-nav flex-row align-items-center ms-auto">
                            <!-- Notifications -->
                            <li class="nav-item navbar-dropdown dropdown me-3">
                                <a class="nav-link dropdown-toggle hide-arrow" href="javascript:void(0);" data-bs-toggle="dropdown">
                                    <i class="fas fa-bell fs-4 text-warning position-relative">
                                        <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill notification-badge">
                                            3
                                        </span>
                                    </i>
                                </a>
                                <ul class="dropdown-menu dropdown-menu-end">
                                    <li class="px-3 py-2">
                                        <h6 class="mb-0">Thông báo mới</h6>
                                    </li>
                                    <li><hr class="dropdown-divider"></li>
                                    <li>
                                        <a class="dropdown-item" href="#">
                                            <i class="fas fa-shopping-cart me-2 text-primary"></i>
                                            Đơn hàng mới #1234
                                        </a>
                                    </li>
                                    <li>
                                        <a class="dropdown-item" href="#">
                                            <i class="fas fa-exclamation-triangle me-2 text-warning"></i>
                                            Sắp hết hàng: Áo dài lụa đỏ
                                        </a>
                                    </li>
                                </ul>
                            </li>

                            <!-- User -->
                            <li class="nav-item navbar-dropdown dropdown-user dropdown">
                                <a class="nav-link dropdown-toggle hide-arrow" href="javascript:void(0);" data-bs-toggle="dropdown">
                                    <div class="avatar avatar-online">
                                        <img src="@avatarPath" alt class="w-px-40 h-auto rounded-circle" />
                                    </div>
                                </a>
                                <ul class="dropdown-menu dropdown-menu-end">
                                    <li>
                                        <a class="dropdown-item" href="#">
                                            <div class="d-flex">
                                                <div class="flex-shrink-0 me-3">
                                                    <div class="avatar avatar-online">
                                                        <img src="@avatarPath" alt class="w-px-40 h-auto rounded-circle" />
                                                    </div>
                                                </div>
                                                <div class="flex-grow-1">
                                                    <small class="text-muted">@hoten</small>
                                                </div>
                                            </div>
                                        </a>
                                    </li>
                                    <li>
                                        <div class="dropdown-divider"></div>
                                    </li>
                                    <li>
                                        <a class="dropdown-item" href="/Admin/Profile">
                                            <i class="fas fa-user me-2"></i>
                                            <span class="align-middle">Hồ Sơ Cá Nhân</span>
                                        </a>
                                    </li>
                                    <li>
                                        <a class="dropdown-item" href="/Admin/Account/Settings">
                                            <i class="fas fa-cog me-2"></i>
                                            <span class="align-middle">Cài Đặt</span>
                                        </a>
                                    </li>
                                    <li>
                                        <div class="dropdown-divider"></div>
                                    </li>
                                    <li>
                                        <form id="adminLogoutForm" asp-area="Auth" asp-controller="Auth" asp-action="Logout" method="post" class="d-inline" autocomplete="off">
                                            @Html.AntiForgeryToken()
                                            <a class="dropdown-item" href="javascript:void(0)" onclick="handleAdminLogout(event)">
                                                <i class="fas fa-sign-out-alt me-2"></i>
                                                <span class="align-middle">Đăng xuất</span>
                                            </a>
                                        </form>
                                    </li>
                                </ul>
                            </li>
                            <!--/ User -->
                        </ul>
                    </div>
                </nav>
                <!-- / Navbar -->
                <!-- ===== CONTENT WRAPPER ===== -->
                <div class="content-wrapper fade-in-up">
                    <!-- Content -->
                    <div class="container-xxl">
                        <main role="main" class="py-4">
                            @RenderBody()
                        </main>
                    </div>
                    <!-- / Content -->
                    <!-- ===== FOOTER ===== -->
                    <footer class="content-footer footer bg-footer-theme">
                        <div class="container-xxl d-flex flex-wrap justify-content-between py-3 flex-md-row flex-column">
                            <div class="mb-2 mb-md-0">
                                ©
                                <script>
                                    document.write(new Date().getFullYear());
                                </script>
                                , được tạo với ❤️ bởi
                                <a href="#" target="_blank" class="footer-link fw-bolder">Đội Ngũ Phát Triển Áo Dài VN</a>
                            </div>
                            <div>
                                <a href="#" class="footer-link me-4">Hỗ Trợ</a>
                                <a href="#" class="footer-link">Liên Hệ</a>
                            </div>
                        </div>
                    </footer>
                    <!-- / Footer -->

                    <div class="content-backdrop fade"></div>
                </div>
                <!-- Content wrapper -->
            </div>
            <!-- / Layout page -->
        </div>

        <!-- Overlay -->
        <div class="layout-overlay layout-menu-toggle"></div>
    </div>
    <!-- / Layout wrapper -->
    <!-- ===== CORE JS ===== -->
    <script src="/admin/assets/vendor/libs/jquery/jquery.js"></script>
    <script src="/admin/assets/vendor/libs/popper/popper.js"></script>
    <script src="/admin/assets/vendor/js/bootstrap.js"></script>
    <script src="/admin/assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.js"></script>
    <script src="/admin/assets/vendor/js/menu.js"></script>

    <!-- Vendors JS -->
    <script src="/admin/assets/vendor/libs/apex-charts/apexcharts.js"></script>

    <!-- Main JS -->
    <script src="/admin/assets/js/main.js"></script>
    <script src="/admin/assets/js/dashboards-analytics.js"></script>

    <!-- External Libraries -->
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery-validation@1.19.5/dist/jquery.validate.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/jquery-validation-unobtrusive@3.2.12/dist/jquery.validate.unobtrusive.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>

    <!-- ===== CUSTOM SCRIPTS ===== -->
    <script>
        document.addEventListener("DOMContentLoaded", function() {
            // Form confirmation handler
            const forms = document.querySelectorAll("form[data-confirm]");

            forms.forEach(function(form) {
                form.addEventListener("submit", function(e) {
                    e.preventDefault();
                    const confirmMessage = form.getAttribute("data-confirm");

                    Swal.fire({
                        title: 'Bạn có chắc chắn?',
                        text: confirmMessage,
                        icon: 'warning',
                        showCancelButton: true,
                        confirmButtonColor: '#dc2626',
                        cancelButtonColor: '#6b7280',
                        confirmButtonText: 'Đồng ý',
                        cancelButtonText: 'Hủy bỏ'
                    }).then(function(result) {
                        if (result.isConfirmed) {
                            form.submit();
                        }
                    });
                });
            });

            // Smooth menu interactions
            document.querySelectorAll('.menu-link').forEach(function(link) {
                link.addEventListener('click', function(e) {
                    document.querySelectorAll('.menu-item').forEach(function(item) {
                        item.classList.remove('active');
                    });
                    e.target.closest('.menu-item').classList.add('active');
                });
            });

            // Search functionality
            const searchInput = document.querySelector('.search-box input');
            if (searchInput) {
                searchInput.addEventListener('keypress', function(e) {
                    if (e.key === 'Enter') {
                        performSearch(this.value);
                    }
                });
            }
        });

        // Admin logout handler
        async function handleAdminLogout(event) {
            event.preventDefault();
            const result = await Swal.fire({
                title: 'Bạn có chắc muốn đăng xuất?',
                icon: 'warning',
                showCancelButton: true,
                confirmButtonText: 'Đăng xuất',
                cancelButtonText: 'Hủy',
                confirmButtonColor: '#dc2626',
                cancelButtonColor: '#6b7280'
            });

            if (!result.isConfirmed) return;

            try {
                const form = document.getElementById('adminLogoutForm');
                const formData = new FormData(form);

                const response = await fetch('/Auth/Auth/Logout', {
                    method: 'POST',
                    body: formData,
                    headers: {
                        'RequestVerificationToken': getCsrfToken()
                    }
                });

                const data = await response.json();

                if (data.success) {
                    await Swal.fire({
                        icon: 'success',
                        title: 'Đăng xuất thành công',
                        text: 'Bạn đã đăng xuất khỏi hệ thống',
                        timer: 2000,
                        showConfirmButton: false
                    });

                    window.location.href = data.redirectUrl || '/';
                } else {
                    throw new Error(data.message || 'Đăng xuất thất bại');
                }
            } catch (error) {
                console.error('Logout failed:', error);
                Swal.fire({
                    icon: 'error',
                    title: 'Đăng xuất thất bại',
                    text: error.message || 'Có lỗi xảy ra khi đăng xuất'
                });
            }
        }

        // Get CSRF token helper
        function getCsrfToken() {
            const input = document.querySelector('input[name="__RequestVerificationToken"]');
            return input ? input.value : '';
        }

        // Search functionality
        function performSearch(query) {
            if (query.trim() === '') return;

            // Show loading
            Swal.fire({
                title: 'Đang tìm kiếm...',
                allowOutsideClick: false,
                didOpen: () => {
                    Swal.showLoading();
                }
            });

            // Simulate search - replace with actual search logic
            setTimeout(() => {
                Swal.close();
                // Redirect to search results or update current page
                console.log('Searching for:', query);
            }, 1000);
        }

        // Toast notification helper
        function showToast(type, message) {
            const Toast = Swal.mixin({
                toast: true,
                position: 'top-end',
                showConfirmButton: false,
                timer: 3000,
                timerProgressBar: true,
                didOpen: (toast) => {
                    toast.addEventListener('mouseenter', Swal.stopTimer);
                    toast.addEventListener('mouseleave', Swal.resumeTimer);
                }
            });

            Toast.fire({
                icon: type,
                title: message
            });
        }

        // Form validation enhancement
        function enhanceFormValidation() {
            // Custom validation messages in Vietnamese
            if (typeof jQuery !== 'undefined' && jQuery.validator) {
                jQuery.extend(jQuery.validator.messages, {
                    required: "Trường này là bắt buộc.",
                    remote: "Vui lòng sửa trường này.",
                    email: "Vui lòng nhập email hợp lệ.",
                    url: "Vui lòng nhập URL hợp lệ.",
                    date: "Vui lòng nhập ngày hợp lệ.",
                    dateISO: "Vui lòng nhập ngày hợp lệ (ISO).",
                    number: "Vui lòng nhập số hợp lệ.",
                    digits: "Vui lòng chỉ nhập số.",
                    creditcard: "Vui lòng nhập số thẻ tín dụng hợp lệ.",
                    equalTo: "Vui lòng nhập cùng giá trị.",
                    extension: "Vui lòng nhập tệp với phần mở rộng hợp lệ.",
                    maxlength: jQuery.validator.format("Vui lòng nhập không quá {0} ký tự."),
                    minlength: jQuery.validator.format("Vui lòng nhập ít nhất {0} ký tự."),
                    rangelength: jQuery.validator.format("Vui lòng nhập từ {0} đến {1} ký tự."),
                    range: jQuery.validator.format("Vui lòng nhập từ {0} đến {1}."),
                    max: jQuery.validator.format("Vui lòng nhập nhỏ hơn hoặc bằng {0}."),
                    min: jQuery.validator.format("Vui lòng nhập lớn hơn hoặc bằng {0}.")
                });
            }
        }

        // Initialize enhancements when document is ready
        document.addEventListener("DOMContentLoaded", function() {
            enhanceFormValidation();
        });

        // Utility functions for common operations
        window.AoDaiAdmin = {
            // Show success message
            showSuccess: function(message) {
                showToast('success', message);
            },

            // Show error message
            showError: function(message) {
                showToast('error', message);
            },

            // Show warning message
            showWarning: function(message) {
                showToast('warning', message);
            },

            // Show info message
            showInfo: function(message) {
                showToast('info', message);
            },

            // Confirm action
            confirm: function(title, text, callback) {
                Swal.fire({
                    title: title,
                    text: text,
                    icon: 'warning',
                    showCancelButton: true,
                    confirmButtonColor: '#dc2626',
                    cancelButtonColor: '#6b7280',
                    confirmButtonText: 'Đồng ý',
                    cancelButtonText: 'Hủy bỏ'
                }).then(function(result) {
                    if (result.isConfirmed && callback) {
                        callback();
                    }
                });
            }
        };
    </script>

    @await RenderSectionAsync("Scripts", required: false)
</body>
</html>